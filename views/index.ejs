<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Recommender</title>
  <script src="../bower_components/react/react-dom.js"></script>
  <script src="../bower_components/react/react.js"></script>
  <script src="../bower_components/jquery/dist/jquery.js"></script>
  <script src="../bower_components/babel/browser.js"></script>
  <link rel='stylesheet' href='/stylesheets/style.css' />
  <link rel='stylesheet' href='/stylesheets/flexBox.css' />
</head>
<body>

<div id="content">

</div>



<script type="text/babel">



  var MainComponent = React.createClass({
    getInitialState: function() {
      return {
        mainData: []
      };
    },

    mountMainData: function(){
      $.ajax({
        dataType: "json",
        url: 'http://localhost:3000/',
        success: function(data){
          alert("Yes");
          this.setState({data:data});
        }.bind(this),
        error: function(xhr, status, err) {
          console.error(this.props.url, status, err.toString());
        }.bind(this)
      });
    },

    render: function() {
      return (
      <h2>{this.mainData}Hello</h2>
      );
    }
  });

  var MainComponent = React.createClass({
    getInitialState: function() {
      return {data: []};
    },
    componentDidMount: function() {
      $.ajax({
        url: 'http://localhost:3000/mainData',
        dataType: 'json',
        cache: false,
        success: function(data) {
          this.setState({data: data});
        }.bind(this),
        error: function(xhr, status, err) {
          console.error(this.props.url, status, err.toString());
        }.bind(this)
      });
    },
    render: function() {
      return (
              <div className="phoneList">
              {
                this.state.data.map(function(phone) {
                return (
                        <div class="tile">
                          <div className ="phone header tile-title   " >{phone.CompanyName}</div>
                          <div className ="phone specs" >{phone.PhoneName}</div>
                          <div className ="phone specs" >{phone.PhysicalSize}</div>
                        </div>
                );
              })
    }
              </div>
      );
    }
  });


  React.render(<MainComponent />, document.getElementById('content'));



</script>

</body>
</html>
